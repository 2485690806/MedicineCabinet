{"version":3,"sources":["uni_modules/zzy-SerialPort/utssdk/app-android/index.uts"],"sourcesContent":["import SerialPortHelper from \"me.f1reking.serialportlib.SerialPortHelper\"\nimport Device from \"me.f1reking.serialportlib.entity.Device\"\nimport Status from \"me.f1reking.serialportlib.listener.Status\"\nimport IOpenSerialPortListener from \"me.f1reking.serialportlib.listener.IOpenSerialPortListener\"\nimport ISerialPortDataListener from \"me.f1reking.serialportlib.listener.ISerialPortDataListener\"\nimport File from 'java.io.File';\n\n\n\nexport class serialPort {\n\tprivate serialPortHelper : SerialPortHelper = new SerialPortHelper();\n\n\t//设置串口\n\tpublic setPath(port : string) : void {\n\t\tthis.serialPortHelper.setPort(port);\n\t}\n\n\t//设置波特率 \n\tpublic setBaudRate(baudRate : Int) {\n\t\tthis.serialPortHelper.setBaudRate(baudRate);\n\t}\n\n\t//设置停止位\n\tpublic setStopBits(setStopBits : Int) : void {\n\t\tthis.serialPortHelper.setStopBits(setStopBits);\n\t}\n\n\n\t//设置校验位\n\tpublic setParity(parity : Int) : void {\n\t\tthis.serialPortHelper.setParity(parity);\n\t}\n\n\t//设置流控\n\tpublic setFlowCon(flowCon : Int) : void {\n\t\tthis.serialPortHelper.setFlowCon(flowCon);\n\t}\n\n\t//设置标志\n\tpublic setFlags(flags : Int) : void {\n\t\tthis.serialPortHelper.setFlags(flags);\n\t}\n\n\t//打开串口\n\tpublic open(callback : (arg : object) => any) : void {\n\t\tclass iOpenSerialPortListener implements IOpenSerialPortListener {\n\t\t\toverride onSuccess(device : File) : void {\n\t\t\t\tcallback({ \"status\": true })\n\t\t\t}\n\t\t\toverride onFail(evice : File, status : Status) : void {\n\t\t\t\tcallback({ \"status\": false, \"msg\": status })\n\t\t\t}\n\t\t}\n\t\tthis.serialPortHelper.setIOpenSerialPortListener(new iOpenSerialPortListener());\n\n\t\ttry {\n\t\t\tthis.serialPortHelper.open();\n\t\t}\n\t\tcatch (e) {\n\t\t\tcallback({ \"status\": false, \"msg\": \"NO_READ_WRITE_PERMISSION\" })\n\t\t}\n\t}\n\n\t//关闭串口\n\tpublic close() : void {\n\t\tthis.serialPortHelper.close();\n\t}\n\n\t//串口状态\n\tpublic isOpen() : Boolean {\n\t\treturn this.serialPortHelper.isOpen();\n\t}\n\n\t//发送16进制\n\tpublic sendHex(hex : string) : void {\n\t\tthis.serialPortHelper.sendHex(hex);\n\t}\n\n\t//设置监听16进制\n\tpublic setListenerHex(sendCallback ?: (arg1 : string) => any, receivedCallback ?: (arg1 : string) => any) : void {\n\t\tconst _this = this\n\t\tclass iSerialPortDataListener implements ISerialPortDataListener {\n\t\t\toverride onDataSend(bytes : ByteArray) : void {\n\t\t\t\tif (sendCallback != null) {\n\t\t\t\t\tsendCallback(_this.byteToHex(bytes))\n\t\t\t\t}\n\t\t\t}\n\t\t\toverride onDataReceived(bytes : ByteArray) : void {\n\t\t\t\tif (receivedCallback != null) {\n\t\t\t\t\treceivedCallback(_this.byteToHex(bytes))\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.serialPortHelper.setISerialPortDataListener(new iSerialPortDataListener());\n\t}\n\tprivate byteToHex(bytes : ByteArray) : string {\n\t\tlet Str : string = \"\"\n\t\tfor (let i in bytes) {\n\t\t\tlet byte = i & 0xFF\n\t\t\tStr += byte.toString(16).padStart(2, '0')\n\t\t}\n\t\treturn Str\n\t}\n}\n"],"names":[],"mappings":"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"}